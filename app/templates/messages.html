{% extends "base.html" %} {% block app_content %}
<h1>Messages</h1>
{% for message in messages %} {% include '_message.html' %} {% endfor %}
<nav aria-label="...">
    <ul class="pager">
        <li class="previous{% if not prev_url %} disabled{% endif %}">
            <a href="{{ prev_url or '#' }}">
                <span aria-hidden="true">&larr;</span>Newer messages
            </a>
        </li>
        <li class="next{% if not next_url %} disabled{% endif %}">
            <a href="{{ next_url or '#' }}">
                    Older messages<span aria-hidden="true">&rarr;</span>
                </a>
        </li>
    </ul>
</nav>
{% endblock %} {% block scripts %} {{ super() }}
<script>
    function agree_add_friend() {
        var e = arguments.callee.caller.arguments[0] || window.event;
        console.log(e)
        obj = e.target || e.srcElement;
        console.log(obj)
        parent = obj.parentNode;
        console.log(parent)
        id = parent.getAttribute('id');
        console.log(id)
            // name = document.getElementById('sender').innerHTML;
        $.get('/agree_add_friend', {
            message_id: id
        }).done(function(response) {
            console.log('request success')
            parent.innerHTML = "<p>已处理</p>"
        }).fail(function(response) {
            console.log('request fail')
            parent.innerHTML = ""
        })
    }

    function refuse_add_friend() {
        var e = arguments.callee.caller.arguments[0] || window.event;
        console.log(e)
        obj = e.target || e.srcElement;
        console.log(obj)
        parent = obj.parentNode;
        console.log(parent)
        id = parent.getAttribute('id');
        console.log(id)
            // name = document.getElementById('sender').innerHTML;
        $.get('/refuse_add_friend', {
            message_id: id
        }).done(function(response) {
            console.log('request success')
            parent.innerHTML = "<p>已处理</p>"
        }).fail(function(response) {
            console.log('request fail')
            parent.innerHTML = ""
        })
    }
</script>
{% endblock %}